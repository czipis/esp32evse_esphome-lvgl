substitutions:
  device_name: esp32-evse-display2
  friendly_name: "ESP32-EVSE Display 2"
  friendly_name_evse: "EVSE 2"
  device_description: "Panlee WT32-SC01 Plus"

external_components:
  - source:
      type: git
      url: https://github.com/nagyrobi/esp32evse-esphome
    refresh: 4min
    components: [ esp32evse ]

esphome:
  name: ${device_name}
  comment: "${device_description}"
  on_boot:
    - priority: -300
      then:
        - delay: 3s
        - esp32evse.state.subscribe: 1s
        - esp32evse.enable.subscribe: 500ms

esp32:
  board: esp32-s3-devkitc-1
  flash_size: 16MB
  framework:
    type: esp-idf

logger:
  baud_rate: 0

psram:
  speed: 80MHz

debug:
  update_interval: 60s

ota:
  - platform: esphome
    password: !secret ota_password

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

api:
  reboot_timeout: 15min
  encryption:
    key: !secret encryption_key

spi:
  - type: octal
    id: display_qspi
    clk_pin: 47
    data_pins:
      - 9
      - ignore_strapping_warning: true
        number: 46
      - ignore_strapping_warning: true
        number: 3
      - 8
      - 18
      - 17
      - 16
      - 15

i2c:
  sda: 6
  scl: 5
  frequency: 400kHz
  id: touchscreen_bus

output:
  - id: gpio_backlight_pwm
    platform: ledc
    pin:
      number: GPIO45
      ignore_strapping_warning: true

light:
  - id: display_backlight
    name: Backlight
    platform: monochromatic
    output: gpio_backlight_pwm
    restore_mode: ALWAYS_ON
    default_transition_length: 500ms
    on_state:
      - lvgl.slider.update:
          id: lvgl_slider_settings_screen_bright
          value: !lambda return (int(id(display_backlight).remote_values.get_brightness() * 100));

display:
  - platform: mipi_spi
    id: my_display
    model: wt32-sc01-plus
    data_rate: 10MHz
    rotation: 90

touchscreen:
  - platform: ft63x6
    id: my_touch
    interrupt_pin: 7
    transform:
      swap_xy: true
      mirror_y: true
    on_release:
      - if:
          condition: lvgl.is_paused
          then:
            - lvgl.resume:
            - lvgl.widget.redraw:
            - light.turn_on:
                id: display_backlight
                transition_length: 300ms

uart:
  id: evse_uart
  tx_pin: 11
  rx_pin: 10
  baud_rate: 115200 #921600 #115200 #460800
  stop_bits: 1
  parity: NONE
  # debug:
    # direction: BOTH
    # dummy_receiver: false
    # after:
      # delimiter: "\r\n"
    # sequence:
      # - lambda: UARTDebug::log_string(direction, bytes);


esp32evse:
  id: evse
  uart_id: evse_uart

mapping:
  - id: j1772_state_map
    from: string
    to: string
    entries:
      A: EV not connected
      B1: EV connected
      B2: EV connected, authorized
      C1: Ready to charge
      C2: Charging
      D1: Ready to charge with ventilation
      D2: Charging with ventilation
      E: Connection error
      F: Error

globals:
  - id: var_evse_max_charge_current
    type: float
    restore_value: yes
    initial_value: '32.0'
  - id: var_evse_ses_charge_current
    type: float

sensor:
  - platform: esp32evse
    esp32evse_id: evse
    temperature:
      name: ${friendly_name_evse} Temperature High
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_temphi
            text:
              format: "%.1f °C"
              args: [ 'x' ]
    temperature_low:
      name: ${friendly_name_evse} Temperature Low
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_templo
            text:
              format: "%.1f °C"
              args: [ 'x' ]
    emeter_power:
      name: ${friendly_name_evse} Charging power
      id: evse_power
      on_value:
        - lvgl.label.update:
            id: 
              - lvgl_label_charging_power
              - lvgl_label_mains_power
            text:
              format: "%.1f kW"
              args: [ 'x / 1000' ]
    emeter_session_time:
      name: ${friendly_name_evse} Session time
      id: evse_session_time
      on_value:
        - lvgl.label.update:
            id: lvgl_label_charging_session_time
            text: !lambda |-
              if (x == 0) {
                  return "-";
              } else {
                  int total = (int)x;
                  auto format_duration = [](int total_seconds) -> std::string {
                    int days = total_seconds / 86400;
                    int hours = (total_seconds % 86400) / 3600;
                    int minutes = (total_seconds % 3600) / 60;
                    int seconds = total_seconds % 60;
                    if (total_seconds < 60) {
                      return std::to_string(seconds) + "s";
                    } else if (total_seconds < 3600) {
                      return std::to_string(minutes) + "m " + std::to_string(seconds) + "s";
                    } else if (total_seconds < 86400) {
                      return std::to_string(hours) + "h " + std::to_string(minutes) + "m";
                    } else {
                      return std::to_string(days) + "d " + std::to_string(hours) + "h " + std::to_string(minutes) + "m";
                    }
                  };
                  return format_duration(total);
              }
    emeter_charging_time:
      name: ${friendly_name_evse} Charging time
      id: evse_charging_time
      on_value:
        - lvgl.label.update:
            id: lvgl_label_charging_charging_time
            text: !lambda |-
              if (x == 0) {
                  return "-";
              } else {
                  int total = (int)x;
                  auto format_duration = [](int total_seconds) -> std::string {
                    int days = total_seconds / 86400;
                    int hours = (total_seconds % 86400) / 3600;
                    int minutes = (total_seconds % 3600) / 60;
                    int seconds = total_seconds % 60;
                    if (total_seconds < 60) {
                      return std::to_string(seconds) + "s";
                    } else if (total_seconds < 3600) {
                      return std::to_string(minutes) + "m " + std::to_string(seconds) + "s";
                    } else if (total_seconds < 86400) {
                      return std::to_string(hours) + "h " + std::to_string(minutes) + "m";
                    } else {
                      return std::to_string(days) + "d " + std::to_string(hours) + "h " + std::to_string(minutes) + "m";
                    }
                  };
                  return format_duration(total);
              }
    heap_used:
      name: ${friendly_name_evse} Heap used
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_heapevse_used
            text:
              format: "%.0f B"
              args: [ 'x' ]
    heap_total:
      name: ${friendly_name_evse} Heap total
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_heapevse_max
            text:
              format: "%.0f B"
              args: [ 'x' ]
    energy_consumption:
      name: ${friendly_name_evse} Energy consumption
      id: evse_session_consumption
      on_value:
        - lvgl.label.update:
            id: lvgl_label_charging_energy_consumed
            text:
              format: "%.1f kWh"
              args: [ 'x / 1000' ]
    total_energy_consumption:
      name: ${friendly_name_evse} Energy total consumption
      id: evse_total_consumption
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_total_energy
            text:
              format: "%.1f kWh"
              args: [ 'x / 1000' ]
    voltage_l1:
      name: ${friendly_name_evse} L1 voltage
      internal: true
      on_value:
        - lvgl.label.update:
            id: lvgl_label_mains_voltage_l1
            text:
              format: "%.2f \nV"
              args: [ 'x' ]
    voltage_l2:
      name: ${friendly_name_evse} L2 voltage
      internal: true
      on_value:
        - lvgl.label.update:
            id: lvgl_label_mains_voltage_l2
            text:
              format: "%.2f \nV"
              args: [ 'x' ]
    voltage_l3:
      name: ${friendly_name_evse} L3 voltage
      internal: true
      on_value:
        - lvgl.label.update:
            id: lvgl_label_mains_voltage_l3
            text:
              format: "%.2f \nV"
              args: [ 'x' ]
    current_l1:
      name: ${friendly_name_evse} L1 current
      internal: true
      on_value:
        - lvgl.label.update:
            id: lvgl_label_mains_current_l1
            text:
              format: "%.2f \nA"
              args: [ 'x' ]
    current_l2:
      name: ${friendly_name_evse} L2 current
      internal: true
      on_value:
        - lvgl.label.update:
            id: lvgl_label_mains_current_l2
            text:
              format: "%.2f \nA"
              args: [ 'x' ]
    current_l3:
      name: ${friendly_name_evse} L3 current
      internal: true
      on_value:
        - lvgl.label.update:
            id: lvgl_label_mains_current_l3
            text:
              format: "%.2f \nA"
              args: [ 'x' ]
    wifi_rssi:
      name: ${friendly_name_evse} WiFi signal

  - platform: wifi_signal 
    name: ${friendly_name} WiFi signal
    id: wifi_signal_db
    entity_category: "diagnostic"
    on_value:
      - lvgl.label.update:
          id: lvgl_label_info_disp_wifi_signal_db
          text:
            format: "%.0f dBm"
            args: [ 'x' ]

  - platform: debug
    free:
      name: ${friendly_name} Heap Free
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_heapdisp_free
            text:
              format: "%.0f B"
              args: [ 'x' ]
    block:
      name: ${friendly_name} Heap Max Block
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_heapdisp_max
            text:
              format: "%.0f B"
              args: [ 'x' ]
    loop_time:
      name: ${friendly_name} Loop Time
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_disploop
            text:
              format: "%.0f ms"
              args: [ 'x' ]

  - platform: uptime
    name: ${friendly_name} uptime
    disabled_by_default: false
    on_value:
      - lvgl.label.update:
          id: lvgl_label_info_uptime_disp
          text: !lambda |-
            int total = (int)x;
            auto format_duration = [](int total_seconds) -> std::string {
              int days = total_seconds / 86400;
              int hours = (total_seconds % 86400) / 3600;
              int minutes = (total_seconds % 3600) / 60;
              int seconds = total_seconds % 60;
              if (total_seconds < 60) {
                return std::to_string(seconds) + "s";
              } else if (total_seconds < 3600) {
                return std::to_string(minutes) + "m " + std::to_string(seconds) + "s";
              } else if (total_seconds < 86400) {
                return std::to_string(hours) + "h " + std::to_string(minutes) + "m";
              } else {
                return std::to_string(days) + "d " + std::to_string(hours) + "h " + std::to_string(minutes) + "m";
              }
            };
            return format_duration(total);

  # - platform: template
    # name: ${friendly_name_evse} Uptime
    # id: evse_uptime
    # lambda: return id(evse_uptime_var);
    # update_interval: 60s
    # unit_of_measurement: "s"
    # entity_category: diagnostic
    # icon: mdi:timer-outline
    # accuracy_decimals: 0
    # on_value:
      # - lvgl.label.update:
          # id: lvgl_label_info_uptime
          # text: !lambda |-
            # int total = (int)x;
            # auto format_duration = [](int total_seconds) -> std::string {
              # int days = total_seconds / 86400;
              # int hours = (total_seconds % 86400) / 3600;
              # int minutes = (total_seconds % 3600) / 60;
              # int seconds = total_seconds % 60;
              # if (total_seconds < 60) {
                # return std::to_string(seconds) + "s";
              # } else if (total_seconds < 3600) {
                # return std::to_string(minutes) + "m " + std::to_string(seconds) + "s";
              # } else if (total_seconds < 86400) {
                # return std::to_string(hours) + "h " + std::to_string(minutes) + "m";
              # } else {
                # return std::to_string(days) + "d " + std::to_string(hours) + "h " + std::to_string(minutes) + "m";
              # }
            # };
            # return format_duration(total);


binary_sensor:
  - platform: status
    id: api_connected_bs
    name: Hálózat
    on_state:
      - lvgl.label.update:
          id: lvgl_label_info_disp_api_connected
          text: !lambda 'return std::string(x ? "Yes" : "No");'


  - platform: esp32evse
    esp32evse_id: evse
    pending_authorization:
      name: ${friendly_name_evse} Pending authorization
      on_press:
        - lvgl.widget.show: lvgl_authorize_popup_window
      on_release:
        - lvgl.widget.hide: lvgl_authorize_popup_window
    wifi_connected:
      name: ${friendly_name_evse} WiFi connected


  # - platform: template
    # name: ${friendly_name_evse} Charging limit reached
    # id: evse_limreach
    # on_press:
      # - text_sensor.template.publish:
          # id: evse_charging_statusmsg
          # state: "Charging limit reached"

  - platform: template
    name: ${friendly_name_evse} Pilot Fault
    id: evse_pilot_fault
    device_class: problem
    entity_category: diagnostic
    on_state:
      - lvgl.label.update:
          id: lvgl_label_info_pilot_fault
          text: !lambda 'return std::string(x ? "Error" : "OK");'

  - platform: template
    name: ${friendly_name_evse} Diode Short
    id: evse_diode_short
    device_class: problem
    entity_category: diagnostic
    on_state:
      - lvgl.label.update:
          id: lvgl_label_info_diode_short
          text: !lambda 'return std::string(x ? "Error" : "OK");'

  - platform: template
    name: ${friendly_name_evse} Lock Fault
    id: evse_lock_fault
    device_class: problem
    entity_category: diagnostic
    on_state:
      - lvgl.label.update:
          id: lvgl_label_info_lock_fault
          text: !lambda 'return std::string(x ? "Error" : "OK");'

  - platform: template
    name: ${friendly_name_evse} Unlock Fault
    id: evse_unlock_fault
    device_class: problem
    entity_category: diagnostic
    on_state:
      - lvgl.label.update:
          id: lvgl_label_info_unlock_fault
          text: !lambda 'return std::string(x ? "Error" : "OK");'

  - platform: template
    name: ${friendly_name_evse} RCM Triggered
    id: evse_rcm_triggered
    device_class: problem
    entity_category: diagnostic
    on_state:
      - lvgl.label.update:
          id: lvgl_label_info_rcm_triggered
          text: !lambda 'return std::string(x ? "Error" : "OK");'

  - platform: template
    name: ${friendly_name_evse} RCM Self-Test Fault
    id: evse_rcm_selftest_fault
    device_class: problem
    entity_category: diagnostic
    on_state:
      - lvgl.label.update:
          id: lvgl_label_info_selftest_fault
          text: !lambda 'return std::string(x ? "Error" : "OK");'

  - platform: template
    name: ${friendly_name_evse} High Temperature
    id: evse_temp_high
    device_class: problem
    entity_category: diagnostic
    on_state:
      - lvgl.label.update:
          id: lvgl_label_info_temp_high
          text: !lambda 'return std::string(x ? "Error" : "OK");'

  - platform: template
    name: ${friendly_name_evse} Temperature Fault
    id: evse_temp_fault
    device_class: problem
    entity_category: diagnostic
    on_state:
      - lvgl.label.update:
          id: lvgl_label_info_temp_fault
          text: !lambda 'return std::string(x ? "Error" : "OK");'

text_sensor:
  - platform: esp32evse
    esp32evse_id: evse
    state:
      name: ${friendly_name_evse} State (J1772)
      id: evse_state
      on_value:
        - text_sensor.template.publish:
            id: evse_charging_statusmsg
            state: !lambda return id(j1772_state_map)[x];
        - lvgl.label.update:
            id: lvgl_label_info_statusmsg
            text: !lambda |-
              return x + " (" + id(j1772_state_map)[x] + ")";
        - if:
            condition:
                - switch.is_on: evse_reqauth
            then:
              - if:
                  condition:
                      - lambda: |-
                          return x == "B1";
                  then:
                    - esp32evse.pending_authorization.subscribe: 500ms
                  else:
                    - esp32evse.pending_authorization.subscribe: never
        - if:
            condition:
              lambda: |-
                return x == "C1" || x == "C2" || x == "D1" || x == "D2";
            then:
              - esp32evse.emeter_power.subscribe: 1s
              # - esp32evse.emeter_session_time.subscribe: 1s
              # - esp32evse.emeter_charging_time.subscribe: 1s
              # - esp32evse.energy_consumption.subscribe: 2s
              # - esp32evse.voltage.subscribe: 2s
              # - esp32evse.current.subscribe: 2s
            else:
              - delay: 5s
              - esp32evse.emeter_power.subscribe: never
              # - esp32evse.emeter_session_time.subscribe: never
              # - esp32evse.emeter_charging_time.subscribe: never
              # - esp32evse.energy_consumption.subscribe: never
              # - esp32evse.voltage.subscribe: never
              # - esp32evse.current.subscribe: never
        - if:
            condition:
              lambda: 'return (x != "A");'
            then:
              - lvgl.resume:
              - lvgl.widget.redraw:
              - light.turn_on:
                  id: display_backlight
                  transition_length: 300ms


    device_name:
      name: ${friendly_name_evse}  Device name
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_devname
            text: !lambda 'return x.c_str();'
    version:
      name: ${friendly_name_evse} Version
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_fwevse
            text: !lambda 'return x.c_str();'
    chip:
      name: ${friendly_name_evse} MCU
    idf_version:
      name: ${friendly_name_evse} IDF version
    build_time:
      name: ${friendly_name_evse} Build date
    device_time:
      name: ${friendly_name_evse} Clock
    wifi_sta_ssid:
      name: ${friendly_name_evse} SSID
    wifi_sta_ip:
      name: ${friendly_name_evse} IP Address
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_ipevse
            text: !lambda 'return x.c_str();'
    wifi_sta_mac:
      name: ${friendly_name_evse} MAC cím

  - platform: wifi_info
    ip_address:
      name: ${friendly_name} IP Address
      id: txt_ip
      icon: mdi:ip
      on_value:
        - lvgl.label.update:
            id: lvgl_label_info_ipdisp
            text: !lambda 'return x.c_str();'

  - platform: template
    name: ${friendly_name_evse} State
    id: evse_charging_statusmsg
    icon: mdi:ev-station
    on_value:
      - lvgl.label.update:
          id: lvgl_label_charging_statusmsg
          text: !lambda 'return x.c_str();'

button:
  - platform: esp32evse
    esp32evse_id: evse
    reset:
      name: ${friendly_name_evse} Restart
      id: evse_restart
    authorize:
      name: ${friendly_name_evse} Authorize charging
      id: evse_auhorize_charging

  - platform: restart
    name: ${friendly_name} Restart
  - platform: factory_reset
    name: ${friendly_name} factory reset
  - platform: safe_mode
    name: ${friendly_name} safe mode

  - platform: template
    name: ${friendly_name} Manual update
    entity_category: diagnostic
    on_press:
      - lambda: 'return id(evse)->update();'

  - platform: template
    name: "Sub ENT"
    entity_category: diagnostic
    on_press:
      - esp32evse.temperature.subscribe: 1s
      - esp32evse.state.subscribe: 1s
      - esp32evse.enable.subscribe: 1s
  - platform: template
    name: "Unsub ENT"
    entity_category: diagnostic
    on_press:
      - esp32evse.temperature.subscribe: never
  - platform: template
    name: "Unsub ALL"
    entity_category: diagnostic
    on_press:
      - esp32evse.unsubscribe_all:

switch:
  - platform: esp32evse
    esp32evse_id: evse
    enable:
      name: ${friendly_name_evse} Enable charging
      id: evse_enable_charge
      on_turn_on:
        - lvgl.widget.update:
            id: lvgl_switch_charging
            state:
              checked: true
        - lvgl.label.update:
            id: lvgl_label_charging_enabled
            text: "Enabled"
      on_turn_off:
        - lvgl.widget.update:
            id: lvgl_switch_charging
            state:
              checked: false
        - lvgl.label.update:
            id: lvgl_label_charging_enabled
            text: "Disabled"
    available:
      name: ${friendly_name_evse} available
    request_authorization:
      id: evse_reqauth
      name: ${friendly_name_evse} require authorization

number:
  - platform: esp32evse
    esp32evse_id: evse
    charging_current:
      name: ${friendly_name_evse} Charging current
      id: evse_charge_current
      on_value:
        - lvgl.slider.update:
            id: lvgl_slider_charging_current
            value: !lambda |-
              // Normalizing slider scale to 6 -> maxChCur
              float min_amps = 6.0;
              float max_amps = id(var_evse_max_charge_current);
              if (max_amps < min_amps) max_amps = min_amps;
              float percent = (x - min_amps) / (max_amps - min_amps);
              if (percent < 0) percent = 0;
              if (percent > 1) percent = 1;
              int slider_val = (int)(percent * 100);
              return slider_val;
    default_charging_current:
      name: ${friendly_name_evse} Default charging current
    maximum_charging_current:
      name: ${friendly_name_evse} Max charging current
      mode: box
      on_value:
        - globals.set:
            id: var_evse_max_charge_current
            value: !lambda return x;
    consumption_limit:
      name: ${friendly_name_evse} Energy consumption limit
      id: evse_consumption_limit
      on_value:
        - lvgl.slider.update:
            id: lvgl_slider_session_consumption
            value: !lambda return x * 10;
    default_consumption_limit:
      name: ${friendly_name_evse} Default energy consumption limit
    charging_time_limit:
      name: ${friendly_name_evse} Charging time limit
      id: evse_charge_time_limit
      on_value:
        - lvgl.slider.update:
            id: lvgl_slider_session_charging_time
            value: !lambda return x * 2;
    default_charging_time_limit:
      name: ${friendly_name_evse} Default charging time limit
    under_power_limit:
      name: ${friendly_name_evse} Under power limit
      id: evse_underpower_limit
      on_value:
        - lvgl.slider.update:
            id: lvgl_slider_session_underpower
            value: !lambda return x * 10;
    default_under_power_limit:
      name: ${friendly_name_evse} Default under power limit

  - platform: template
    name: ${friendly_name} Display sleep time
    icon: mdi:receipt-clock-outline
    optimistic: true
    entity_category: "config"
    id: display_timeout
    unit_of_measurement: "s"
    initial_value: 90
    restore_value: true
    min_value: 0
    max_value: 600
    step: 5
    mode: box
    on_value:
      - lvgl.slider.update:
          id: lvgl_slider_settings_screen_sleep
          value: !lambda return x;

lvgl:
  buffer_size: 100%
  log_level: WARN
  color_depth: 16
  default_font: montserrat_18
  on_idle:
    - timeout: !lambda "return (id(display_timeout).state * 1000);"
      then:
        - logger.log: "LVGL is idle"
        - light.turn_off:
            id: display_backlight
            transition_length: 2500ms
        - lvgl.pause:
  on_resume:
    - lambda: 'return id(evse)->update();'
  top_layer:
    widgets:
      - obj:
          id: lvgl_authorize_popup_window
          hidden: true
          x: 0
          y: 0
          width: 100%
          height: 100%
          bg_color: 0
          bg_opa: 50%
          radius: 0
          pad_all: 0
          border_width: 0
          widgets:
          - obj:
              align: CENTER
              height: 80%
              width: 80%
              radius: 10
              pad_all: 6
              widgets:
                - label:
                    text: "Charge authorization pending"
                    width: 100%
                    text_align: CENTER
                - button:
                    align: CENTER
                    width: 70%
                    height: 40%
                    y: 10
                    widgets:
                      - label:
                          align: center
                          text: "Authorize charging"
                          text_font: montserrat_22
                    on_press:
                      - button.press: evse_auhorize_charging
                      - lvgl.widget.hide: lvgl_authorize_popup_window
      - obj:
          id: lvgl_mains_popup_window
          hidden: true
          x: 0
          y: 0
          width: 100%
          height: 100%
          bg_color: 0
          bg_opa: 50%
          radius: 0
          pad_all: 0
          border_width: 0
          widgets:
          - obj:
              align: CENTER
              height: 80%
              width: 80%
              radius: 10
              shadow_color: 0
              shadow_opa: 100%
              shadow_spread: 0
              shadow_width: 20
              clickable: false
              pad_all: 6
              layout:
                type: GRID
                grid_columns: [FR(31), FR(23), FR(23), FR(23)]
                grid_rows: [FR(30), FR(35), FR(35)]
              widgets:
                - label:
                    id: lvgl_label_mains_power
                    text: "Mains"
                    text_font: montserrat_22
                    grid_cell_column_pos: 0
                    grid_cell_row_pos: 0
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
                - label:
                    text: "Current"
                    grid_cell_column_pos: 0
                    grid_cell_row_pos: 1
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
                - label:
                    text: "Voltage"
                    grid_cell_column_pos: 0
                    grid_cell_row_pos: 2
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
                - label:
                    text: "L1"
                    grid_cell_column_pos: 1
                    grid_cell_row_pos: 0
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
                - label:
                    id: lvgl_label_mains_current_l1
                    text: "-.- A"
                    text_align: CENTER
                    grid_cell_column_pos: 1
                    grid_cell_row_pos: 1
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
                - label:
                    id: lvgl_label_mains_voltage_l1
                    text: "-.- V"
                    text_align: CENTER
                    grid_cell_column_pos: 1
                    grid_cell_row_pos: 2
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
                - label:
                    text: "L2"
                    grid_cell_column_pos: 2
                    grid_cell_row_pos: 0
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
                - label:
                    id: lvgl_label_mains_current_l2
                    text: "-.- A"
                    text_align: CENTER
                    grid_cell_column_pos: 2
                    grid_cell_row_pos: 1
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
                - label:
                    id: lvgl_label_mains_voltage_l2
                    text: "-.- V"
                    text_align: CENTER
                    grid_cell_column_pos: 2
                    grid_cell_row_pos: 2
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
                - label:
                    text: "L3"
                    grid_cell_column_pos: 3
                    grid_cell_row_pos: 0
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
                - label:
                    id: lvgl_label_mains_current_l3
                    text: "-.- A"
                    text_align: CENTER
                    grid_cell_column_pos: 3
                    grid_cell_row_pos: 1
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
                - label:
                    id: lvgl_label_mains_voltage_l3
                    text: "-.- V"
                    text_align: CENTER
                    grid_cell_column_pos: 3
                    grid_cell_row_pos: 2
                    grid_cell_x_align: CENTER
                    grid_cell_y_align: CENTER
          on_press:
            - lvgl.widget.hide: lvgl_mains_popup_window

  pages:
    - id: main_page_evse
      pad_all: 0
      widgets:
        - tabview:
            id: tab_evse
            position: LEFT
            size: 20%
            tab_style:
                items:
                    text_align: center
            tabs:
                - name: "\uF240\nCharging"
                  text_align: CENTER
                  id: tab_evse_charhing
                  widgets:
                      - label:
                          text: "Please wait..."
                          id: lvgl_label_charging_statusmsg
                          text_font: montserrat_22
                      - switch:
                          x: 10
                          y: 35
                          id: lvgl_switch_charging
#                          on_change:
#                              - lambda: |-
#                                  if (x) {
#                                    id(evse_enable_charge).turn_on();
#                                  } else {
#                                    id(evse_enable_charge).turn_off();
#                                  }
#                          on_release:
#                            - switch.toggle: evse_enable_charge
                      - label:
                          id: lvgl_label_charging_enabled
                          text: "Unknown"
                          x: 70
                          y: 40
                      - obj: # transparent zone above the switch and the label to catch clicks on a wider area
                          id: lvgl_obj_switch_charging
                          x: 5
                          y: 20
                          width: 250
                          height: 65
                          clickable: true
                          opa: TRANSP
                          on_release:
                            - switch.toggle: evse_enable_charge

                      - label:
                          text: "Charging current:"
                          x: 10
                          y: 75
                      - label:
                          id: lvgl_label_charging_current
                          text: "-.- A"
                          x: 250
                          y: 75
                          width: 100
                          text_align: right
                      - slider:
                          id: lvgl_slider_charging_current
                          x: 10
                          y: 108
                          width: 340
                          value: 0
                          min_value: 0 
                          max_value: 100 
                          on_value:
                            - globals.set:
                                id: var_evse_ses_charge_current
                                value: !lambda |-
                                  // Normalizing slider min -> max to 6 -> maxChCur
                                  float percent = x / 100.0;
                                  float min_amps = 6.0;
                                  float max_amps = id(var_evse_max_charge_current);
                                  if (max_amps < min_amps) max_amps = min_amps;
                                  float amps = min_amps + percent * (max_amps - min_amps);
                                  return amps;
                            - lvgl.label.update:
                                id: lvgl_label_charging_current
                                text:
                                  format: "%.1f A"
                                  args: [ 'id(var_evse_ses_charge_current)' ]
                          on_release:
                            - number.set:
                                id: evse_charge_current
                                value: !lambda return id(var_evse_ses_charge_current);
                      - label:
                          text: "Session time"
                          x: 10
                          y: 140
                      - label:
                          id: lvgl_label_charging_session_time
                          text: "-"
                          x: 250
                          y: 140
                          width: 100
                          text_align: right
                      - label:
                          text: "Charging time"
                          x: 10
                          y: 165
                      - label:
                          id: lvgl_label_charging_charging_time
                          text: "-"
                          x: 250
                          y: 165
                          width: 100
                          text_align: right
                      - label:
                          text: "Energy consumption"
                          x: 10
                          y: 190
                      - label:
                          id: lvgl_label_charging_energy_consumed
                          text: "-.- kWh"
                          x: 250
                          y: 190
                          width: 100
                          text_align: right
                      - label:
                          text: "Power"
                          x: 10
                          y: 215
                      - label:
                          id: lvgl_label_charging_power
                          text: "-.- kW"
                          x: 250
                          y: 215
                          width: 100
                          text_align: right
                      - button:
                          x: 250
                          y: 250
                          width: 100
                          height: 35
                          id: btn_id
                          widgets:
                            - label:
                                align: center
                                text: "Mains"
                          on_press:
                            then:
                              - lvgl.widget.show: lvgl_mains_popup_window
                - name: "\uF079\nLimits"
                  id: tab_evse_limits
                  widgets:
                      - label:
                          text: "Session limit"
                          text_font: montserrat_22
                      - label:
                          text: "Energy consumption:"
                          x: 10
                          y: 50
                      - label:
                          id: lvgl_label_session_consumption
                          text: "-.- kWh"
                          x: 250
                          y: 50
                          width: 100
                          text_align: right
                      - slider:
                          id: lvgl_slider_session_consumption
                          x: 10
                          y: 85
                          width: 340
                          value: 10
                          min_value: 0
                          max_value: 800
                          on_release:
                            - number.set:
                                id: evse_consumption_limit
                                value: !lambda return x / 10;
                          on_value:
                            - lvgl.label.update:
                                id: lvgl_label_session_consumption
                                text: !lambda |-
                                  if (x == 0) {
                                      return "none";
                                  } else {
                                      static char buf[10];
                                      snprintf(buf, sizeof(buf), "%.1f kWh", x / 10);
                                      return buf;
                                  }
                      - label:
                          text: "Charging time:"
                          x: 10
                          y: 120
                      - label:
                          id: lvgl_label_session_charging_time
                          text: "- h."
                          x: 250
                          y: 120
                          width: 100
                          text_align: right
                      - slider:
                          id: lvgl_slider_session_charging_time
                          x: 10
                          y: 155
                          width: 340
                          value: 10
                          min_value: 0
                          max_value: 48
                          on_release:
                            - number.set:
                                id: evse_charge_time_limit
                                value: !lambda return x/2;
                          on_value:
                            - lvgl.label.update:
                                id: lvgl_label_session_charging_time
                                text: !lambda |-
                                  if (x == 0) {
                                      return "none";
                                  } else {
                                      int minutes = x * 30;
                                      auto format_duration_minutes = [](int total_minutes) -> std::string {
                                        int hours = total_minutes / 60;
                                        int minutes = total_minutes % 60;
                                        std::string result;
                                        if (hours > 0) result += std::to_string(hours) + "h ";
                                        result += std::to_string(minutes) + "m";
                                        return result;
                                      };
                                      return format_duration_minutes(minutes);
                                  }
                      - label:
                          text: "Under power:"
                          x: 10
                          y: 190
                      - label:
                          id: lvgl_label_session_underpower
                          text: "-.- kW"
                          x: 250
                          y: 190
                          width: 100
                          text_align: right
                      - slider:
                          id: lvgl_slider_session_underpower
                          x: 10
                          y: 225
                          width: 340
                          value: 10
                          min_value: 0
                          max_value: 100
                          on_release:
                            - number.set:
                                id: evse_underpower_limit
                                value: !lambda return x / 10;
                          on_value:
                            - lvgl.label.update:
                                id: lvgl_label_session_underpower
                                text: !lambda |-
                                  if (x == 0) {
                                      return "none";
                                  } else {
                                      static char buf[10];
                                      snprintf(buf, sizeof(buf), "%.1f kW", x / 10);
                                      return buf;
                                  }
                - name: "\uF013\nSettings"
                  id: tab_evse_settings
                  widgets:
                      - label:
                          text: "Settings"
                          text_font: montserrat_22
                      - label:
                          text: "Screen brightness:"
                          x: 10
                          y: 50
                      - label:
                          id: lvgl_label_settings_screen_bright
                          text: "- %"
                          x: 250
                          y: 50
                          width: 100
                          text_align: right
                      - slider:
                          id: lvgl_slider_settings_screen_bright
                          x: 10
                          y: 85
                          width: 340
                          value: 10
                          min_value: 10
                          max_value: 100
                          on_release:
                            - light.turn_on:
                                id: display_backlight
                                brightness: !lambda return x/100;
                          on_value:
                            - lvgl.label.update:
                                id: lvgl_label_settings_screen_bright
                                text:
                                  format: "%.0f%%"
                                  args: [ 'x' ]
                      - label:
                          text: "Screen sleep time:"
                          x: 10
                          y: 120
                      - label:
                          id: lvgl_label_settings_screen_sleep
                          text: "- s."
                          x: 250
                          y: 120
                          width: 100
                          text_align: right
                      - slider:
                          id: lvgl_slider_settings_screen_sleep
                          x: 10
                          y: 155
                          width: 340
                          value: 10
                          min_value: 0
                          max_value: 600
                          on_release:
                            - number.set:
                                id: display_timeout
                                value: !lambda return x;
                          on_value:
                            - lvgl.label.update:
                                id: lvgl_label_settings_screen_sleep
                                text: !lambda |-
                                  if (x == 0) {
                                      return "not set";
                                  } else {
                                      static char buf[10];
                                      snprintf(buf, sizeof(buf), "%.0fs.", x);
                                      return buf;
                                  }
                - name: "\uF304\nInfo"
                  id: tab_evse_info
                  pad_all: 0
                  pad_left: 1
                  widgets:
                    - tabview:
                        id: tab_evse_moreinfo
                        position: BOTTOM
                        tab_style:
                            items:
                                text_align: center
                        tabs:
                            - name: "About"
                              text_align: CENTER
                              scrollable: FALSE
                              widgets:
                                  - label:
                                      text: "ESP32-EVSE"
                                      text_font: montserrat_22
                                  - obj:
                                      align: CENTER
                                      height: 93%
                                      width: 100%
                                      pad_all: 6
                                      pad_right: 10
                                      y: 15
                                      layout:
                                          type: GRID
                                          grid_columns: [FR(40), FR(60)]
                                          grid_rows: [CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT]
                                      widgets:
                                        - label:
                                            text: "Device name"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 0
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_devname
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 0
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Total energy charged"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 1
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_total_energy
                                            text: "- kWh"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 1
                                            grid_cell_x_align: END

                                        - label:
                                            text: "Temperature high"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 2
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_temphi
                                            text: "- °C"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 2
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Temperature low"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 3
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_templo
                                            text: "- °C"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 3
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Uptime"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 4
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_uptime
                                            text: "- s"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 4
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Version"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 5
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_fwevse
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 5
                                            grid_cell_x_align: END
                                        - label:
                                            text: "IP address"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 6
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_ipevse
                                            text: "-.-.-.-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 6
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Heap used"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 7
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_heapevse_used
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 7
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Heap max"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 8
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_heapevse_max
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 8
                                            grid_cell_x_align: END
                                        - button:
                                            id: lvgl_button_info_update_evse
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 9
                                            grid_cell_x_align: START
                                            height: 20
                                            width: 200
                                            widgets:
                                            - label:
                                                align: CENTER
                                                text: "Refresh ESP32-EVSE data"
                                            on_release:
                                              - lambda: 'return id(evse)->update();'
                                        - button:
                                            id: lvgl_button_info_reboot_evse
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 10
                                            grid_cell_x_align: START
                                            height: 20
                                            width: 200
                                            widgets:
                                            - label:
                                                align: CENTER
                                                text: "Restart ESP32-EVSE"
                                            on_release:
                                              - button.press: evse_restart
                            - name: "Status"
                              text_align: CENTER
                              scrollable: FALSE
                              widgets:
                                  - label:
                                      text: "ESP32-EVSE"
                                      text_font: montserrat_22
                                  - obj:
                                      align: CENTER
                                      height: 93%
                                      width: 100%
                                      pad_all: 6
                                      pad_right: 10
                                      y: 15
                                      layout:
                                          type: GRID
                                          grid_columns: [FR(40), FR(60)]
                                          grid_rows: [CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT]
                                      widgets:
                                        - label:
                                            text: "State"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 0
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_statusmsg
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 0
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Pilot Fault"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 1
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_pilot_fault
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 1
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Diode Short"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 2
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_diode_short
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 2
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Lock Fault"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 3
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_lock_fault
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 3
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Unlock Fault"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 4
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_unlock_fault
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 4
                                            grid_cell_x_align: END
                                        - label:
                                            text: "RCM Triggered"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 5
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_rcm_triggered
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 5
                                            grid_cell_x_align: END
                                        - label:
                                            text: "RCM Self-Test Fault"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 6
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_selftest_fault
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 6
                                            grid_cell_x_align: END
                                        - label:
                                            text: "High Temperature"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 7
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_temp_high
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 7
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Temperature Fault"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 8
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_temp_fault
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 8
                                            grid_cell_x_align: END
                            - name: "Display"
                              text_align: CENTER
                              scrollable: FALSE
                              widgets:
                                  - label:
                                      text: "ESPHome"
                                      text_font: montserrat_22
                                  - obj:
                                      align: CENTER
                                      height: 93%
                                      width: 100%
                                      pad_all: 6
                                      pad_right: 10
                                      y: 15
                                      layout:
                                          type: GRID
                                          grid_columns: [FR(40), FR(60)]
                                          grid_rows: [CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT, CONTENT]
                                      widgets:
                                        - label:
                                            text: "Uptime"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 0
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_uptime_disp
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 0
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Version"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 1
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_fwdisp
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 1
                                            grid_cell_x_align: END
                                        - label:
                                            text: "IP address"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 2
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_ipdisp
                                            text: "-.-.-.-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 2
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Heap free"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 3
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_heapdisp_free
                                            text: "-/-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 3
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Heap max block"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 4
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_heapdisp_max
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 4
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Loop time"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 5
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_disploop
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 5
                                            grid_cell_x_align: END
                                        - label:
                                            text: "Wi-Fi signal level"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 6
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_disp_wifi_signal_db
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 6
                                            grid_cell_x_align: END
                                        - label:
                                            text: "API conneted"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 0
                                            grid_cell_row_pos: 7
                                            grid_cell_x_align: START
                                        - label:
                                            id: lvgl_label_info_disp_api_connected
                                            text: "-"
                                            text_font: montserrat_16
                                            grid_cell_column_pos: 1
                                            grid_cell_row_pos: 7
                                            grid_cell_x_align: END

